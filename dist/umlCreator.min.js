var UmlCreator=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(2),o=n(8),s=n(10),a=n(12),u=n(13),d=n(14),h=n(15),l=function(){function e(e,t){this.bgColor="#FFFFE0",this.defaultBorderColor="#000000",this.pixelByLetter=8,this.width=100,this.height=50,this.headerHeight=30,this.propertiesHeight=30,this.methodsHeight=30,this.inputHeight=25,this.padding=10,this.initialConfig(e),this.instance=this.create(t)}return e.prototype.on=function(e,t){"property"==e?this.onPropertyChange=t:"method"==e?this.onMethodChange=t:"position"==e?this.onPositionChange=t:"name"==e&&(this.onNameChange=t)},e.prototype.initialConfig=function(e){this.uml=e,this.width=this.minRequiredWidth>this.width?this.minRequiredWidth:this.width,this.width=this.width+this.padding+15,this.propertiesHeight=e.properties.length*this.inputHeight,this.methodsHeight=e.methods.length*(this.inputHeight+this.padding),this.height=this.headerHeight+this.propertiesHeight+this.methodsHeight},e.prototype.create=function(e){var t=this,n=e.append("g").attrs({key:this.uml.key,height:this.height,width:this.width,x:this.uml.position.x,y:this.uml.position.y,transform:"translate(\n                "+this.uml.position.x+",\n                "+this.uml.position.y+")"}).on("contextmenu",function(){new r.ContextMenu([{title:"Add Property",action:function(){t.addRemoveProperty()}},{title:"Add Method",action:function(){t.addRemoveMethod()}},{title:"Remove",action:function(){n.remove()}}])});return this.addHeader(this.uml.key,n,this.uml.name),this.addProperties(this.uml.key,n,this.uml.properties),this.addMethods(this.uml.key,n,this.uml.methods),this.bindDrag(n),this.addBorder(n),n},e.prototype.enableDrag=function(){this.bindDrag(this.instance)},e.prototype.disableDrag=function(){this.instance.on("mousedown.start",null),this.instance.on("mousedown.drag",null)},e.prototype.changeBorderColor=function(e){this.instance.select('[type="border"]').attr("stroke",e)},e.prototype.getBorderColor=function(){return this.instance.select('[type="border"]').attr("stroke")},e.prototype.addBorder=function(e){e.append("rect").attrs({key:"border",type:"border",stroke:this.defaultBorderColor,"stroke-width":"1px",height:this.height,width:this.width,fill:"none",style:"cursor:grab;"})},e.prototype.addHeader=function(e,t,n){var i,r=this,o=t.append("g").attr("type","header");return o.append("rect").attrs({type:"back-header",stroke:this.defaultBorderColor,"stroke-width":"1px",height:this.headerHeight,width:this.width,fill:this.bgColor,style:"cursor:grab;",y:0}),o.append("foreignObject").attr("x",(this.width-n.length*this.pixelByLetter+2)/2).attr("y",this.headerHeight/6).attr("width",n.length*this.pixelByLetter+2).attr("height",this.inputHeight).attr("key",e+"_header").append("xhtml:div").append("input").attr("class","uml_input").attr("value",n).on("focus",function(){i=r.uml.name,r.disableDrag(),d3.select("body").attr("canZoom",!1)}).on("focusout",function(){setTimeout(function(){r.enableDrag(),d3.select("body").attr("canZoom",!0),i!=r.uml.name&&r.onNameChange&&(i=r.uml.name,r.onNameChange())},200)}).on("input",function(){var t=d3.select('foreignObject[key="'+e+'_header"]'),n=d3.select('foreignObject[key="'+e+'_header"] input');r.uml.name=n.node().value;var i=n.node().value.length*r.pixelByLetter+2;r.updateWidth(t,i)}),o},e.prototype.addProperties=function(e,t,n){var o,s=this,a=this,u=t.append("g").attr("type","properties");return u.append("rect").attrs({type:"back-properties",stroke:this.defaultBorderColor,"stroke-width":"1px",height:this.propertiesHeight,width:this.width,fill:this.bgColor,style:"cursor:grab;",y:this.headerHeight}),u.selectAll("text").data(n).enter().append("foreignObject").attr("key",function(t){return t.key=e+"_property_"+i.Utils.generateID(),t.key}).attr("x",this.padding).attr("y",function(e,t){return(t+1.3)*s.inputHeight+"px"}).attr("width",function(e){return s.getInputPropertyWidth(e)+s.padding+15}).attr("height",this.inputHeight).append("xhtml:div").append("input").attr("class","uml_input").attr("key",function(e){return e.key+"_input"}).attr("value",function(e){return s.getVisibilitySymbol(e.visibility)+(e.name+": ")+e.type}).on("focus",function(e){o=e.name,s.disableDrag(),d3.select("body").attr("canZoom",!1)}).on("focusout",function(e){setTimeout(function(){s.enableDrag(),d3.select("body").attr("canZoom",!0),o!=e.name&&s.onPropertyChange&&(o=e.name,s.onPropertyChange())},200)}).on("input",function(e){var t=d3.select('foreignObject[key="'+e.key+'"]'),n=t.select('input[key="'+e.key+'_input"]');e.name=n.node().value,e.type="";var i=s.getInputPropertyWidth(e)+s.padding;s.updateWidth(t,i)}).on("contextmenu",function(e){new r.ContextMenu([{title:"Remove",action:function(){a.addRemoveProperty(e.key)}}])}),u},e.prototype.addMethods=function(e,t,n){var o,s=this,a=this,u=t.append("g").attr("type","methods");return u.append("rect").attrs({type:"back-methods",stroke:this.defaultBorderColor,"stroke-width":"1px",height:this.methodsHeight,width:this.width,fill:this.bgColor,style:"cursor:grab;",y:this.propertiesHeight+this.headerHeight}),u.selectAll("text").data(n).enter().append("foreignObject").attr("key",function(t){return t.key=e+"_method_"+i.Utils.generateID(),t.key}).attr("x",this.padding).attr("y",function(e,t){return s.propertiesHeight+s.headerHeight+s.inputHeight*(t+0)+s.padding+"px"}).attr("width",function(e){var t=0,n=e.parameters.map(function(e){return e.name.length+e.type.length});return n.length>0&&(t=n.reduce(function(e,t){return e+t})),(e.name.length+e.type.length+t)*s.pixelByLetter+s.padding+15}).attr("height",this.inputHeight).append("xhtml:div").append("input").attr("key",function(e){return e.key+"_input"}).attr("class","uml_input").attr("value",function(e){var t=e.parameters.map(function(e){return e.name+": "+e.type}),n=e.type?": "+e.type.trim():"";return s.getVisibilitySymbol(e.visibility)+e.name+"("+t.join(", ")+")"+n}).on("focus",function(e){o=e.name,s.disableDrag(),d3.select("body").attr("canZoom",!1)}).on("focusout",function(e){setTimeout(function(){s.enableDrag(),d3.select("body").attr("canZoom",!0),o!=e.name&&s.onMethodChange&&(o=e.name,s.onMethodChange())},200)}).on("input",function(e){var t=d3.select('foreignObject[key="'+e.key+'"]'),n=t.select('input[key="'+e.key+'_input"]');e.name=n.node().value,e.type="",e.parameters=[];var i=s.getInputPropertyWidth(e)-3*s.padding;s.updateWidth(t,i+s.padding)}).on("contextmenu",function(e){new r.ContextMenu([{title:"Remove",action:function(){a.addRemoveMethod(e.key)}}])}),u},e.prototype.updateWidth=function(e,t){var n=t,i=this.instance.select('[type="header"] foreignObject'),r=this.instance.select('rect[type="back-header"]'),o=this.instance.select('rect[type="back-properties"]'),s=this.instance.select('rect[type="back-methods"]'),a=this.minRequiredWidth;t<a&&(n=a),this.width=n,this.instance.attr("width",n),r.attr("width",n),o.attr("width",n),s.attr("width",n),this.instance.select('[type="border"]').attr("width",n);var u=this.uml.name.length*this.pixelByLetter,d=(n-u)/2;i.attr("width",u),i.attr("x",d),e.attr("width",t)},e.prototype.bindDrag=function(e){var t,n,i,o,s=this,a=!1,u=d3.drag().on("start",function(){new r.ContextMenu("close"),t=e.attr("x")-d3.event.x,n=e.attr("y")-d3.event.y}).on("drag",function(){a=!0,i=d3.event.x+t,o=d3.event.y+n,new r.ContextMenu("close"),e.attr("x",i).attr("y",o).attr("transform","translate("+i+","+o+")"),s.uml.position=new h.UMLPosition({x:i,y:o})}).on("end",function(){s.onPositionChange&&a&&(a=!1,s.onPositionChange())});e.call(u)},e.prototype.addRemoveProperty=function(e){var t=!1;if(e){var n=this.uml.properties.findIndex(function(t){return t.key==e});n>-1&&(this.uml.properties.splice(n,1),t=!0)}else this.uml.properties.push(s.createDefaultProperty()),t=!0;t&&(d3.select('[key="'+this.uml.key+'"]').select('[type="header"]').remove(),d3.select('[key="'+this.uml.key+'"]').select('[type="properties"]').remove(),d3.select('[key="'+this.uml.key+'"]').select('[type="methods"]').remove(),this.initialConfig(this.uml),this.uml=this.formatPropertiesAndMethods(this.uml),this.instance.select('[key="border"]').remove(),this.addHeader(this.uml.key,this.instance,this.uml.name),this.addProperties(this.uml.key,this.instance,this.uml.properties),this.addMethods(this.uml.key,this.instance,this.uml.methods),this.addBorder(this.instance),this.onPropertyChange&&this.onPropertyChange())},e.prototype.addRemoveMethod=function(e){var t=!1;if(e){var n=this.uml.methods.findIndex(function(t){return t.key==e});n>-1&&(this.uml.methods.splice(n,1),t=!0)}else this.uml.methods.push(o.createDefaultMethod()),t=!0;t&&(d3.select('[key="'+this.uml.key+'"]').select('[type="header"]').remove(),d3.select('[key="'+this.uml.key+'"]').select('[type="properties"]').remove(),d3.select('[key="'+this.uml.key+'"]').select('[type="methods"]').remove(),this.initialConfig(this.uml),this.uml=this.formatPropertiesAndMethods(this.uml),this.instance.select('[key="border"]').remove(),this.addHeader(this.uml.key,this.instance,this.uml.name),this.addProperties(this.uml.key,this.instance,this.uml.properties),this.addMethods(this.uml.key,this.instance,this.uml.methods),this.addBorder(this.instance),this.onMethodChange&&this.onMethodChange())},e.prototype.formatPropertiesAndMethods=function(e){for(var t=0;t<e.properties.length;t++){var n=e.properties[t],i=n.name.split(":");if(i.length>1)if(n.type=i[1].trim(),(o=i[0].trim().split(" ")).length>1){switch(o[0].trim().toLowerCase()){case u.PropertyVisibilitySymbol.public:n.visibility=a.PropertyVisibility.public;break;case u.PropertyVisibilitySymbol.private:n.visibility=a.PropertyVisibility.private;break;case u.PropertyVisibilitySymbol.protected:n.visibility=a.PropertyVisibility.protected;break;default:n.visibility=""}n.name=o[1].trim()}else n.name=i[0].trim();e.properties[t]=n}for(t=0;t<e.methods.length;t++){var r=e.methods[t];if(""==r.type&&0==r.parameters.length){var o,s=r.name.split("(");if((o=s[0].trim().split(" ")).length>1)switch(r.name=o[1].trim(),o[0].trim().toLowerCase()){case u.PropertyVisibilitySymbol.public:r.visibility=a.PropertyVisibility.public;break;case u.PropertyVisibilitySymbol.private:r.visibility=a.PropertyVisibility.private;break;case u.PropertyVisibilitySymbol.protected:r.visibility=a.PropertyVisibility.protected;break;default:r.visibility=""}else r.name=o[0].trim();if(s.length>1){for(var h=s[1].trim().split(")"),l=h[0].trim().split(","),c=0;c<l.length;c++){var p=l[c].split(":"),y="",m=p[0].trim();p.length>1&&(y=p[1].trim()),(m||y)&&r.parameters.push(new d.UMLParameter({name:m,type:y}))}if(h.length>1){y=h[1].trim();r.type=0==y.indexOf(":")?y.substring(1):y}}else r.name=o[0].trim()}}return e},e.prototype.getInputPropertyWidth=function(e){return(e.name.length+e.type.length)*this.pixelByLetter},e.prototype.getVisibilitySymbol=function(e){if(!e)return" ";switch(e.toLowerCase()){case a.PropertyVisibility.public:return u.PropertyVisibilitySymbol.public+" ";case a.PropertyVisibility.private:return u.PropertyVisibilitySymbol.private+" ";case a.PropertyVisibility.protected:return u.PropertyVisibilitySymbol.protected+" ";default:return" "}},Object.defineProperty(e.prototype,"minRequiredWidth",{get:function(){var e=Math.max.apply(Math,this.uml.properties.map(function(e){return e.name.length+e.type.length})),t=Math.max.apply(Math,this.uml.methods.map(function(e){var t=0,n=e.parameters.map(function(e){return e.name.length+e.type.length});return n.length>0&&(t=n.reduce(function(e,t){return e+t})),e.name.length+e.type.length+t})),n=e>t?e:t;return(n>this.uml.name.length?n:this.uml.name.length)*this.pixelByLetter+this.padding},enumerable:!0,configurable:!0}),e}();t.UMLCreator=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.noop=function(){},e.isFn=function(e){return"function"==typeof e},e.isArray=function(e){return Array.isArray(e)},e.const=function(e){return function(){return e}},e.toFactory=function(t,n){return t=void 0===t?n:t,e.isFn(t)?t:e.const(t)},e.generateID=function(){return"_"+Math.random().toString(36).substr(2,9)},e}();t.Utils=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){"close"===e?this.closeMenu():(this.menuItems=e,this.config=t,this.init())}return e.prototype.init=function(){this.closeMenu(),d3.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu "),d3.select("body").on("mousedown.d3-context-menu",this.closeMenu),d3.select("body").on("click.d3-context-menu",this.closeMenu),d3.selectAll(".d3-context-menu").append("ul").call(this.createNestedMenu.bind(this)),d3.select(".d3-context-menu").style("left",d3.event?d3.event.pageX-2+"px":"0px").style("top",d3.event?d3.event.pageY-2+"px":"0px").style("display","block"),d3.event&&(d3.event.preventDefault(),d3.event.stopPropagation())},e.prototype.closeMenu=function(){d3.select(".d3-context-menu").remove(),d3.select("body").on("mousedown.d3-context-menu",null)},e.prototype.createNestedMenu=function(e){var t=this;e.selectAll("li").data(this.menuItems).enter().append("li").each(function(e,n){d3.select(this).html(e.title).on("click",function(){e.action&&e.action(n),t.closeMenu()})})},e}();t.ContextMenu=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){if(null==e)throw Error("UML cannot be null");this.key=e.key,this.name=e.name,this.properties=e.properties,this.methods=e.methods,this.position=e.position}}();t.UML=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){return function(e){e&&(e.source instanceof i.UMLCreator?this.source=e.source.uml.key:this.source=e.source,e.target instanceof i.UMLCreator?this.target=e.target.uml.key:this.target=e.target)}}();t.Link=r},function(e,t,n){n(6),e.exports=n(7)},function(e,t,n){e.exports=n.p+"umlCreator.min.css"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(16),o=n(17),s=n(2),a=n(18),u=n(1),d=n(19),h=n(20),l=function(){function e(e){this.nodesData=new Array,this.nodes=new Array,this.links=new Array,this.currentLink=new o.FakeLink,this.callbackChanges=new Array,this.init(e),this.svgContainer=this.create(),this.addLinksConfiguration()}return e.prototype.fromJson=function(e){var t=this;if(!e.data)throw"Json must have a data property, ex. data: { nodes:[], links: [] }";if(!u.Utils.isArray(e.data.nodes))throw"Json property 'data.nodes' must be of type array, ex. data: { nodes:[], links: [] }";if(e.data.links&&!u.Utils.isArray(e.data.links))throw"Json property 'data.links' must be of type array, ex. data: { nodes:[], links: [] }";e.data.links&&e.data.links.length>0&&(this.links=e.data.links),e.data.nodes&&e.data.nodes.length>0&&e.data.nodes.forEach(function(e){t.addNewUMLNode(e)}),this.restartLinks()},e.prototype.toJson=function(){if(!this.links&&!this.nodes)return new a.JsonUMLCreator;if(!this.nodes&&this.links)return new a.JsonUMLCreator([],this.links);var e=this.nodes.map(function(e){return e.formatPropertiesAndMethods(e.uml)});return new a.JsonUMLCreator(e,this.links)},e.prototype.on=function(e,t){var n=new d.UMLOnChange({type:e,callback:t});this.callbackChanges.push(n)},e.prototype.executeOnChangeCallbacks=function(e,t){this.callbackChanges.forEach(function(n){u.Utils.isArray(n.type)?n.type.find(function(t){return t==e})&&(u.Utils.isArray(t)?n.callback.apply(n,t):n.callback(t)):n.type==e&&(u.Utils.isArray(t)?n.callback.apply(n,t):n.callback(t))})},e.prototype.init=function(e){var t=this;this.containeRef=e||"body",d3.select(this.containeRef).append("xhtml:div").attrs({id:"uml_diagram_workspace",class:"uml-diagram-creator"}),d3.select(this.containeRef).append("xhtml:ul").attr("class","uml-menu").append("li").append("span").attrs({id:"uml_menu_item",draggable:"true",class:"uml-class-icon"}),this.workspaceElement=document.getElementById("uml_diagram_workspace"),this.workspaceElement.addEventListener("dragover",function(e){e.preventDefault()}),this.workspaceElement.addEventListener("drop",function(e){var n=t.nodesData.length>0?t.nodesData[t.nodesData.length-1].key:0;n++;var i=r.createDefault(n,{x:e.x,y:e.y});t.addNewUMLNode(i,!0)})},e.prototype.addLinksConfiguration=function(){var e=this.svgContainer,t=this;e.append("svg:defs").append("svg:marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",6).attr("markerWidth",3).attr("markerHeight",3).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","#000"),this.currentLink.dragLine=e.append("svg:path").attr("class","link dragline hidden").attr("d","M0,0L0,0"),this.svgContainer.append("svg:g").attr("key","links"),window.addEventListener("mousemove",function(e){t.currentLink.mousedownNode&&t.currentLink.dragLine.attr("d","M"+t.currentLink.mousedownNode.x+","+t.currentLink.mousedownNode.y+"L"+e.clientX+","+e.clientY)}),window.addEventListener("mouseup",function(){t.currentLink.mousedownNode&&(t.currentLink.dragLine.classed("hidden",!0).style("marker-end",""),t.resetCurrentLink())})},e.prototype.resetCurrentLink=function(){this.currentLink.mousedownNode=null,this.currentLink.mouseupNode=null},e.prototype.create=function(){var e=d3.select("#uml_diagram_workspace").append("svg").attrs({width:window.innerWidth,height:window.innerHeight}).append("g");return window.addEventListener("resize",function(){d3.select(e.node().parentNode).attrs({width:window.innerWidth,height:window.innerHeight})}),e},e.prototype.addNewUMLNode=function(e,t){var n=this;void 0===t&&(t=!1);this.nodesData.push(e);var r=new i.UMLCreator(e,this.svgContainer);this.nodes.push(r),r.instance.on("click",function(){"#FF9800"==r.getBorderColor()?(n.removeLinkArrows(r),r.changeBorderColor(r.defaultBorderColor),r.enableDrag()):(r.changeBorderColor("#FF9800"),n.addLinkArrows(r,"#a3a3a3","#000000"),r.disableDrag())}).on("mouseover",function(){n.currentLink.mousedownNode&&r.instance!==n.currentLink.mousedownNode&&r.changeBorderColor("#FF9800")}).on("mouseout",function(){n.currentLink.mousedownNode&&r.instance!==n.currentLink.mousedownNode&&r.changeBorderColor(r.defaultBorderColor)}).on("mouseup",function(){if(n.currentLink.mousedownNode){if(n.currentLink.dragLine.classed("hidden",!0).style("marker-end",""),r.instance===n.currentLink.mousedownNode)return n.resetCurrentLink(),void n.nodes.forEach(function(e){e.enableDrag()});r.changeBorderColor(r.defaultBorderColor),n.currentLink.to=r.uml.key;var e=n.currentLink.toLink();n.links.find(function(t){return t.source==e.source&&t.target==e.target})||n.links.push(e);var t=n.nodes.find(function(e){return e.instance==n.currentLink.mousedownNode});n.executeOnChangeCallbacks(h.UMLOnChangeType.changeLink,[t.formatPropertiesAndMethods(t.uml),r.formatPropertiesAndMethods(r.uml)]),n.resetCurrentLink(),n.restartLinks(),n.nodes.forEach(function(e){e.enableDrag()})}}),t&&(this.executeOnChangeCallbacks(h.UMLOnChangeType.change,r.formatPropertiesAndMethods(r.uml)),this.executeOnChangeCallbacks(h.UMLOnChangeType.changeName,r.formatPropertiesAndMethods(r.uml)),this.executeOnChangeCallbacks(h.UMLOnChangeType.changeProperty,r.formatPropertiesAndMethods(r.uml)),this.executeOnChangeCallbacks(h.UMLOnChangeType.changeMethod,r.formatPropertiesAndMethods(r.uml)),this.executeOnChangeCallbacks(h.UMLOnChangeType.changePosition,r.formatPropertiesAndMethods(r.uml))),r.on("name",function(){n.executeOnChangeCallbacks(h.UMLOnChangeType.change,r.formatPropertiesAndMethods(r.uml)),n.executeOnChangeCallbacks(h.UMLOnChangeType.changeName,r.formatPropertiesAndMethods(r.uml))}),r.on("property",function(){n.executeOnChangeCallbacks(h.UMLOnChangeType.change,r.formatPropertiesAndMethods(r.uml)),n.executeOnChangeCallbacks(h.UMLOnChangeType.changeProperty,r.formatPropertiesAndMethods(r.uml))}),r.on("method",function(){n.executeOnChangeCallbacks(h.UMLOnChangeType.change,r.formatPropertiesAndMethods(r.uml)),n.executeOnChangeCallbacks(h.UMLOnChangeType.changeMethod,r.formatPropertiesAndMethods(r.uml))}),r.on("position",function(){n.executeOnChangeCallbacks(h.UMLOnChangeType.change,r.formatPropertiesAndMethods(r.uml)),n.executeOnChangeCallbacks(h.UMLOnChangeType.changePosition,r.formatPropertiesAndMethods(r.uml))})},e.prototype.addLinkArrows=function(e,t,n){var i=this;["top","right","bottom","left"].forEach(function(r){var o,s,a,u,d,h;"top"==r?(o=0,s=30,a=e.width/2,u=-10,d=e.width/2,h=-30):"right"==r?(o=-30,s=0,a=e.width+10,u=e.height/2,d=e.width+30,h=e.height/2):"bottom"==r?(o=0,s=-30,a=e.width/2,u=e.height+10,d=e.width/2,h=e.height+30):(o=30,s=0,a=-10,u=e.height/2,d=-30,h=e.height/2);var l=e.instance.append("svg:defs").attr("key","triangle-right").append("svg:marker").attr("id",e.uml.key+"triangle-"+r).attr("refX",3).attr("refY",3).attr("markerWidth",30).attr("markerHeight",30).attr("orient","auto").append("path").attr("d","M 0 0 6 3 0 6 1.5 3").style("cursor","pointer").style("transition","fill 0.2s ease-in-out").style("fill",t),c=e.instance.append("line").attr("group",e.uml.key+"_arrow").attr("key","arrow-"+r).attr("x1",a).attr("y1",u).attr("x2",d).attr("y2",h).attr("marker-end","url(#"+e.uml.key+"triangle-"+r+")").attr("stroke-width",2).style("cursor","pointer").style("transition","stroke 0.2s ease-in-out").style("stroke",t);c.on("mouseover",function(){l.style("fill",n),c.style("stroke",n)}).on("mouseout",function(){l.style("fill",t),c.style("stroke",t)}).on("mousedown",function(){e.disableDrag(),i.removeLinkArrows(e),e.changeBorderColor(e.defaultBorderColor),i.currentLink.from=e.uml.key,i.currentLink.mousedownNode=e.instance,i.currentLink.selectedNode=i.currentLink.mousedownNode===i.currentLink.selectedNode?null:i.currentLink.mousedownNode,i.currentLink.selectedLink=null,i.currentLink.mousedownNode.x=d3.event.x+o,i.currentLink.mousedownNode.y=d3.event.y+s,i.currentLink.dragLine.style("marker-end","url(#arrow)").classed("hidden",!1).attr("d","M"+i.currentLink.mousedownNode.x+","+i.currentLink.mousedownNode.y+"L"+i.currentLink.mousedownNode.x+","+i.currentLink.mousedownNode.y)})})},e.prototype.removeLinkArrows=function(e){["top","right","bottom","left"].forEach(function(t){e.instance.select('[key="arrow-'+t+'"]').remove(),e.instance.select('[key="triangle-'+t+'"]').remove()})},e.prototype.restartLinks=function(){var e=this,t=this.svgContainer.select('[key="links"]').selectAll("path");(t=t.data(this.links)).style("marker-end","url(#arrow)"),t.exit().remove(),(t=t.enter().append("svg:path").attr("class","link").attr("source",function(e){return e.source}).attr("target",function(e){return e.target})).style("marker-end","url(#arrow)").on("mousedown",function(e){d3.event.ctrlKey}).on("contextmenu",function(t){new s.ContextMenu([{title:"Remove",action:function(){e.links.splice(t.index,1),e.restartLinks(),e.executeOnChangeCallbacks(h.UMLOnChangeType.changeLink,[t.source.formatPropertiesAndMethods(t.source.uml),t.target.formatPropertiesAndMethods(t.target.uml)])}}])}).merge(t),d3.forceSimulation(this.nodes).force("link",d3.forceLink().id(function(e){return e.uml.key}).links(this.links).distance(100)).force("charge",d3.forceManyBody().strength(-100)).on("tick",function(){t.attr("d",function(e){var t=e.source.uml.position.x+e.source.width/2,n=e.source.uml.position.y+e.source.height/2,i=e.target.uml.position.x+e.target.width/2,r=e.target.uml.position.y+e.target.height/2,o=i-t,s=r-n,a=Math.sqrt(o*o+s*s),u=o/a,d=s/a;return"M"+(t+30*u)+","+(n+30*d)+"L"+(i-30*u)+","+(r-30*d)})}).alphaTarget(.2).restart()},e}();t.init=function(e){return new l(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.createDefaultMethod=function(){return new i.UMLMethod({name:"Method",type:"Type",visibility:"public",parameters:[{name:"parameter",type:"Type"}]})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){e&&(this.key=e.key,this.name=e.name,this.visibility=e.visibility,this.type=e.type,this.parameters=e.parameters)}}();t.UMLMethod=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11);t.createDefaultProperty=function(){return new i.UMLProperty({name:"Property",type:"Type",visibility:"public"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){e&&(this.key=e.key,this.name=e.name,this.type=e.type,this.visibility=e.visibility)}}();t.UMLProperty=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.public="public",e.private="private",e.protected="protected"}(t.PropertyVisibility||(t.PropertyVisibility={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.public="+",e.private="-",e.protected="#"}(t.PropertyVisibilitySymbol||(t.PropertyVisibilitySymbol={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){e&&(this.name=e.name,this.type=e.type)}}();t.UMLParameter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){e&&(this.x=e.x,this.y=e.y)}}();t.UMLPosition=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.createDefault=function(e,t){return new i.UML({key:e,name:"ClassName",methods:[{name:"Method",type:"Type",visibility:"public",parameters:[{name:"parameter",type:"Type"}]}],properties:[{name:"Property",type:"Type",visibility:"public"}],position:{x:t.x,y:t.y}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(){function e(e){e&&(this.from=e.from,this.to=e.to,this.selectedNode=e.selectedNode,this.selectedLink=e.selectedLink,this.mousedownNode=e.mousedownNode,this.dragLine=e.dragLine)}return e.prototype.toLink=function(){return new i.Link({source:this.from,target:this.to})},e}();t.FakeLink=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n(3),o=function(){return function(e,t){this.data=new s,this.data.nodes=[],this.data.links=[],e&&(this.data.nodes=e.map(function(e){return new r.UML(e)})),t&&(this.data.links=t.map(function(e){return new i.Link(e)}))}}();t.JsonUMLCreator=o;var s=function(){return function(){}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){e&&(this.type=e.type,this.callback=e.callback)}}();t.UMLOnChange=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.change="change",e.changeName="change:name",e.changeProperty="change:property",e.changeMethod="change:method",e.changePosition="change:position",e.changeLink="change:link"}(t.UMLOnChangeType||(t.UMLOnChangeType={}))}]);